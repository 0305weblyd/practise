<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>


        var canvas = document.createElement('canvas');

        canvas.width = 500;
        canvas.height = 500;
        canvas.style.border = '1px #ccc solid';
        document.body.appendChild(canvas);
        var ctx = canvas.getContext('2d');
        //
        var deg = Math.PI / 180;
        console.log(deg);
        ctx.beginPath();
        ctx.fillStyle = 'yellow';
        ctx.arc(250, 250, 200, 0, 360);
        ctx.fill();
        ctx.fillStyle = 'green';


        ctx.beginPath();
        ctx.lineWidth = 5;
        ctx.strokeStyle = '#ccc';
        ctx.moveTo(180, 70);
        ctx.lineTo(180, 100);
        ctx.moveTo(200, 60);
        ctx.lineTo(200, 100);
        ctx.moveTo(220, 60);
        ctx.lineTo(220, 100);
        ctx.moveTo(240, 60);
        ctx.lineTo(240, 100);
        ctx.moveTo(260, 60);
        ctx.lineTo(260, 100);
        ctx.moveTo(280, 60);
        ctx.lineTo(280, 100);
        ctx.moveTo(300, 60);
        ctx.lineTo(300, 100);

        ctx.stroke();

        ctx.beginPath();
        ctx.fillStyle = '#fff';
        ctx.arc(350, 150, 20, 0, 360);
        ctx.fill();
        ctx.beginPath();
        ctx.fillStyle = 'black';
        ctx.arc(350, 160, 10, 0, 360);
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(100, 250);
        ctx.moveTo(300, 260);

        ctx.lineTo(400, 300);
        ctx.lineTo(500, 250);

        ctx.fillStyle = '#fff';

        ctx.fill();
        // ctx.closePath();




        // --------------------------------------------------------------------------




        var data = [
            { value: 335, name: '直接访问', color: "rgb(213, 58, 53)" },
            { value: 310, name: '邮件营销', color: "rgb(51, 75, 92)" },
            { value: 234, name: '联盟广告', color: "rgb(106, 176, 184)" },
            { value: 135, name: '视频广告', color: "rgb(233, 143, 111)" },
            { value: 1548, name: '搜索引擎', color: "rgb(145, 199, 174)" }
        ]



        var canvas = document.createElement('canvas');

        canvas.width = 500;
        canvas.height = 500;
        canvas.style.border = '1px #ccc solid';
        document.body.appendChild(canvas);
        var ctx = canvas.getContext('2d');
        //
        var deg = Math.PI / 180;
        // ctx.beginPath();
        // ctx.arc(250, 250, 150, 0, 360);
        // ctx.stroke();

        var colors = [];
        var sums = [];
        for (var i = 0; i < data.length; i++) {
            colors.push(data[i].color);
            sums.push(data[i].value);
        }
        console.log(colors);
        console.log(sums);

        var sum = sums.reduce(function (a, b) {
            return a + b;
        })

        var degs = data.map(function (item) {
            return item.value / sum * 360;
        });

        var startdeg = -90;

        for (var i = 0; i < degs.length; i++) {
            var enddeg = degs[i];
            ctx.beginPath();
            ctx.fillStyle = colors[i];

            ctx.moveTo(250, 250);
            ctx.arc(250, 250, 100, startdeg * deg, (startdeg + enddeg) * deg);
            ctx.closePath();
            ctx.fill();
            // 第二个开始的值是第一个结束的值
            startdeg += enddeg;
        }

        ctx.beginPath();
        ctx.fillStyle = "#fff";
        ctx.moveTo(250, 250)
        ctx.arc(250, 250, 60, 0, 360);
        ctx.fill();
        ctx.closePath();

    </script>
</body>

</html>